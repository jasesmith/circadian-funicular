!function(e,t){"use strict";var i=function(e){var t={};return e&&(t={t:e.offsetTop,r:e.offsetLeft+e.offsetWidth,b:e.offsetTop+e.offsetHeight,l:e.offsetLeft,w:e.offsetWidth,h:e.offsetHeight},t.cx=t.l+t.w/2,t.cy=t.t+t.h/2),t},n=function(e,t){var n=i(t),r=Math.atan2(e.clientY-n.cy,e.clientX-n.cx),m=Math.round(180*r/Math.PI);return m},r=function(t,i){e.element(t).css({transform:"rotate("+i+"deg)"})},m=function(e,t){var i,n=3+1/30*(e%360);return n=0>n?n+12:n,i=parseInt(n),"m"===t&&(i=parseInt(5*n)%60),i};e.module("app").directive("timeDial",["$interval",function(i){return{restrict:"E",replace:!0,scope:{time:"=?",diameter:"=?",unit:"=?"},template:'<div><div class="time-dial barrel" ng-style="size(unit)"><div class="lcd" hm-tap="toggleMeridiem()"><div class="time">{{format(time)|date:\'h:mm\'}}</div><div class="meridiem">{{format(time)|date:\'a\'}}</div></div><div class="crown hour"><span hm-pan="setCrown($event, \'h\')"></span></div><div class="crown minute"><span hm-pan="setCrown($event, \'m\')"></span></div></div></div>',link:function(i,a){i.time||(i.time=t());var o=e.element(a.find(".minute")),s=e.element(a.find(".hour")),d=function(e,t){e=e?e:i.time;var n=e.minutes(),m=e.hours(),a=6*n-90,d=30*m+.5*n-450;t&&"m"!==t||r(o,a),t&&"h"!==t||r(s,d)};i.meridiem="am"===i.time.format("a")?"am":"pm",i.format=function(e){return new Date(e)},i.size=function(e){return e=e?e:"vmin",{fontSize:i.diameter+e}},i.toggleMeridiem=function(){"am"===i.meridiem?(i.time.add(12,"hours"),i.meridiem="pm"):(i.time.subtract(12,"hours"),i.meridiem="am")},i.setCrown=function(e,t){var r=n(e.pointers[0],a[0]),o=m(r,t),s=i.time;"m"===t?(i.time.minute(o),0===o&&59===i.prevTick&&(s=i.time.add(1,"hour")),0===i.prevTick&&59===o&&(s=i.time.subtract(1,"hour")),d(s,"h"),i.prevTick=o):("pm"===i.meridiem&&(o+=12),i.time.hour(o)),d(i.time,t)},d()}}}])}(window.angular,window.moment);